# Template file for 'libmygui'
pkgname=libmygui
version=3.4.2
revision=2
hostmakedepends="cmake ninja doxygen pkg-config"
makedepends="SDL2-devel libogre-devel libX11-devel ois-devel boost-devel freetype-devel"
short_desc="Fast, flexible and simple GUI"
maintainer="John <me@johnnynator.dev>"
license="MIT"
homepage="http://mygui.info"
distfiles="https://github.com/MyGUI/mygui/archive/MyGUI${version}.tar.gz"
checksum=1cc45fb96c9438e3476778449af0378443d84794a458978a29c75306e45dd45a

build_mygui_platform() {
	cmake -Bbuild-$1 -GNinja \
		-DMYGUI_RENDERSYSTEM=$2 \
		-DMYGUI_BUILD_DEMOS=OFF \
		-DMYGUI_BUILD_TOOLS=ON \
		-DMYGUI_INSTALL_TOOLS=ON
		-DMYGUI_INSTALL_DOCS=ON
	ninja -C build-$1 ${makejobs}
}

do_build() {
	build_mygui_platform dummy 1
	build_mygui_platform ogre 3
}

do_install() {
	ninja -C build-dummy install
	rm ${DESTDIR}/usr/lib/*.a
}

libmygui-devel_package() {
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
		vmove "usr/lib/*.a"
	}
}

post_install() {
	vlicense COPYING.MIT
}

libmygui-dummy_package() {
	short_desc+=" (dummy platform)"
	pkg_install() {
		echo TODO
	}
}

libmygui-dummy-devel_package() {
	short_desc+=" (dummy platform - development files)"
	pkg_install() {
		echo TODO
	}
}

libmygui-ogre_package() {
	short_desc+=" (OGRE platform)"
	pkg_install() {
		echo TODO
	}
}

libmygui-ogre-devel_package() {
	short_desc+=" (OGRE platform - development files)"
	pkg_install() {
		echo TODO
	}
}
